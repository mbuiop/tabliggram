<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÙ… Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒØ¯Ù‡ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: Tahoma, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #ffffff;
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
            zoom: 0.9;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        /* Video Template */
        .video-template {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .video-box {
            width: 100%;
            height: 200px;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
            position: relative;
        }

        .video-box video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-title {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #fff;
            text-align: center;
        }

        .video-description {
            font-size: 0.9rem;
            color: #ccc;
            margin-bottom: 15px;
            line-height: 1.4;
            text-align: center;
        }

        .video-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 15px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: #00ff88;
            margin-bottom: 3px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #aaa;
        }

        .video-link {
            display: block;
            text-align: center;
            background: linear-gradient(135deg, #00ff88, #00cc6a);
            color: #000;
            text-decoration: none;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
            margin-top: 10px;
        }

        /* Template Buttons */
        .template-type-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .template-type-btn {
            background: #2a5298;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .template-type-btn.active {
            background: #00ff88;
            color: #000;
        }

        /* Templates Grid */
        .template-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .template-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            color: #333;
        }

        .template-card.active {
            background: white;
            border: 2px solid #2a5298;
        }

        .template-card h3 {
            color: #2a5298;
            margin-bottom: 10px;
            text-align: center;
            font-size: 1rem;
        }

        .template-weights {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 10px;
        }

        .weight-item {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
        }

        .weight-value {
            color: #2a5298;
            font-weight: bold;
        }

        .card-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }

        .card-stat {
            font-size: 0.8rem;
            color: #666;
        }

        /* Input Form */
        .input-form {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            display: none;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .input-group {
            margin-bottom: 10px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: #fff;
        }

        .input-group input {
            width: 100%;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 0.9rem;
        }

        /* Buttons */
        .generate-btn {
            background: #2a5298;
            border: none;
            padding: 12px;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            width: 100%;
        }

        .reset-btn {
            background: #ff4757;
            border: none;
            padding: 10px;
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }

        /* Signal Result */
        .signal-result {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .signal-direction {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
        }

        .buy-strong { color: #00ff88; }
        .sell-strong { color: #ff4757; }

        .signal-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .signal-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        /* History */
        .history-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ¤– Ø³ÛŒØ³ØªÙ… Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒØ¯Ù‡ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h1>
            <p>ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§Ø²Ø§Ø±</p>
        </div>

        <!-- Video Template -->
        <div class="video-template">
            <div class="video-box">
                <video id="mainVideo" autoplay muted loop playsinline>
                    <source src="m.mp4" type="video/mp4">
                    Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² ÙˆÛŒØ¯Ø¦Ùˆ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
                </video>
            </div>
            
            <h3 class="video-title">Ø¢Ù…ÙˆØ²Ø´ ØªØ­Ù„ÛŒÙ„ ØªÚ©Ù†ÛŒÚ©Ø§Ù„</h3>
            <p class="video-description">ÙˆÛŒØ¯Ø¦ÙˆÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ ØªØ­Ù„ÛŒÙ„ ØªÚ©Ù†ÛŒÚ©Ø§Ù„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¨Ù‡ØªØ±</p>
            
            <div class="video-stats">
                <div class="stat">
                    <div class="stat-value" id="likesCount">42,850</div>
                    <div class="stat-label">Ù„Ø§ÛŒÚ©</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="viewsCount">185,420</div>
                    <div class="stat-label">Ø¨Ø§Ø²Ø¯ÛŒØ¯</div>
                </div>
            </div>
            
            <a href="https://mbuiop.github.io/tabliggram/" class="video-link" target="_blank">
                Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± Ø³Ø§ÛŒØª Ø§ØµÙ„ÛŒ
            </a>
        </div>

        <!-- Template Type Selection -->
        <div class="template-type-buttons">
            <button class="template-type-btn active" onclick="switchTemplateType('100')">Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§ÛŒ 0-100</button>
            <button class="template-type-btn" onclick="switchTemplateType('500')">Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§ÛŒ 0-500</button>
        </div>

        <!-- Template Selection -->
        <div id="templateSection100">
            <div class="template-grid" id="templateGrid100"></div>
        </div>

        <div id="templateSection500" style="display: none;">
            <div class="template-grid" id="templateGrid500"></div>
        </div>

        <!-- Input Form -->
        <div class="input-form" id="inputForm">
            <div class="form-grid">
                <div class="input-group">
                    <label>ğŸ’° Ù†Ù…Ø§Ø¯ Ø§Ø±Ø²</label>
                    <input type="text" id="symbol" placeholder="BTCUSDT">
                </div>
                <div class="input-group">
                    <label>ğŸ’µ Ù‚ÛŒÙ…Øª ÙØ¹Ù„ÛŒ</label>
                    <input type="number" id="currentPrice" placeholder="47500">
                </div>
                <div class="input-group">
                    <label>ğŸ“ˆ Ù…Ù‚Ø§ÙˆÙ…Øª</label>
                    <input type="number" id="resistance" placeholder="50000">
                </div>
                <div class="input-group">
                    <label>ğŸ“‰ Ø­Ù…Ø§ÛŒØª</label>
                    <input type="number" id="support" placeholder="45000">
                </div>
                <div class="input-group">
                    <label>ğŸ“Š RSI</label>
                    <input type="number" id="rsi" placeholder="45">
                </div>
                <div class="input-group">
                    <label>ğŸ“ˆ EMA20</label>
                    <input type="number" id="ema20" placeholder="47000">
                </div>
                <div class="input-group">
                    <label>ğŸ“ˆ EMA50</label>
                    <input type="number" id="ema50" placeholder="46000">
                </div>
                <div class="input-group">
                    <label>ğŸ”µ Upper Band</label>
                    <input type="number" id="upper" placeholder="52000">
                </div>
                <div class="input-group">
                    <label>âš¡ MACD</label>
                    <input type="number" id="macd" placeholder="150">
                </div>
            </div>
            <button class="generate-btn" onclick="generateSignal()">ğŸ¯ ØªÙˆÙ„ÛŒØ¯ Ø³ÛŒÚ¯Ù†Ø§Ù„</button>
            <button class="reset-btn" onclick="resetForm()">ğŸ”„ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯</button>
        </div>

        <!-- Loading -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="margin-top: 10px;">Ø¯Ø± Ø­Ø§Ù„ ØªØ­Ù„ÛŒÙ„...</p>
        </div>

        <!-- Signal Result -->
        <div class="signal-result" id="signalResult"></div>

        <!-- History -->
        <div class="history-section">
            <h3 style="text-align: center; margin-bottom: 10px;">ğŸ“ˆ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§</h3>
            <div id="historyContainer">
                <p style="text-align: center; opacity: 0.7;">Ù‡Ù†ÙˆØ² Ø³ÛŒÚ¯Ù†Ø§Ù„ÛŒ ØªÙˆÙ„ÛŒØ¯ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
            </div>
        </div>
    </div>

    <script>
        // Video Manager
        class VideoManager {
            constructor() {
                this.likes = 42850;
                this.views = 185420;
                this.updateCounters();
            }

            updateCounters() {
                // Ù‡Ø± 10 Ø¯Ù‚ÛŒÙ‚Ù‡ Ù„Ø§ÛŒÚ© Ùˆ Ø¨Ø§Ø²Ø¯ÛŒØ¯ Ø§ÙØ²Ø§ÛŒØ´ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ø¯
                setInterval(() => {
                    this.likes += Math.floor(Math.random() * 50) + 30;
                    this.views += Math.floor(Math.random() * 200) + 100;
                    
                    // Ù†Ù…Ø§ÛŒØ´ Ù…Ù‚Ø§Ø¯ÛŒØ±
                    document.getElementById('likesCount').textContent = this.formatNumber(this.likes);
                    document.getElementById('viewsCount').textContent = this.formatNumber(this.views);
                }, 600000); // 10 Ø¯Ù‚ÛŒÙ‚Ù‡
                
                // Ø§ÙˆÙ„ÛŒÙ† Ù†Ù…Ø§ÛŒØ´
                document.getElementById('likesCount').textContent = this.formatNumber(this.likes);
                document.getElementById('viewsCount').textContent = this.formatNumber(this.views);
            }

            formatNumber(num) {
                if (num >= 1000000) {
                    return (num / 1000000).toFixed(1) + 'M';
                } else if (num >= 1000) {
                    return (num / 1000).toFixed(1) + 'K';
                }
                return num;
            }
        }

        // Trading Bot Class
        class AdvancedTradingBot {
            constructor() {
                this.templates100 = {
                    "Ù‚Ø§Ù„Ø¨ ÛŒÚ©": {"rsi": 25, "ema20": 20, "ema50": 18, "upper": 15, "macd": 22},
                    "Ù‚Ø§Ù„Ø¨ Ø¯Ùˆ": {"rsi": 30, "ema20": 25, "ema50": 20, "upper": 12, "macd": 13},
                    "Ù‚Ø§Ù„Ø¨ Ø³Ù‡": {"rsi": 22, "ema20": 28, "ema50": 25, "upper": 10, "macd": 15},
                    "Ù‚Ø§Ù„Ø¨ Ú†Ù‡Ø§Ø±": {"rsi": 35, "ema20": 15, "ema50": 30, "upper": 8, "macd": 12},
                    "Ù‚Ø§Ù„Ø¨ Ù¾Ù†Ø¬": {"rsi": 28, "ema20": 22, "ema50": 22, "upper": 14, "macd": 14}
                };
                
                this.templates500 = {
                    "Ù‚Ø§Ù„Ø¨ Ø´Ø´": {"rsi": 125, "ema20": 120, "ema50": 118, "upper": 115, "macd": 122},
                    "Ù‚Ø§Ù„Ø¨ Ù‡ÙØª": {"rsi": 130, "ema20": 125, "ema50": 120, "upper": 112, "macd": 113},
                    "Ù‚Ø§Ù„Ø¨ Ù‡Ø´Øª": {"rsi": 122, "ema20": 128, "ema50": 125, "upper": 110, "macd": 115},
                    "Ù‚Ø§Ù„Ø¨ Ù†Ù‡": {"rsi": 135, "ema20": 115, "ema50": 130, "upper": 108, "macd": 112},
                    "Ù‚Ø§Ù„Ø¨ Ø¯Ù‡": {"rsi": 128, "ema20": 122, "ema50": 122, "upper": 114, "macd": 114}
                };
                
                this.templateStats = {};
                this.selectedTemplate = null;
                this.selectedTemplateType = "100";
                this.signalHistory = [];
                this.videoManager = new VideoManager();
                this.initializeTemplates();
            }

            initializeTemplates() {
                this.createTemplateCards('templateGrid100', this.templates100, '100');
                this.createTemplateCards('templateGrid500', this.templates500, '500');
            }

            createTemplateCards(containerId, templates, type) {
                const container = document.getElementById(containerId);
                Object.entries(templates).forEach(([name, weights]) => {
                    // Ù…Ù‚Ø§Ø¯ÛŒØ± Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ù„Ø§ÛŒÚ© Ùˆ Ø¨Ø§Ø²Ø¯ÛŒØ¯
                    if (!this.templateStats[name]) {
                        this.templateStats[name] = {
                            likes: Math.floor(Math.random() * 5000) + 1000,
                            views: Math.floor(Math.random() * 20000) + 5000
                        };
                    }
                    
                    const card = document.createElement('div');
                    card.className = 'template-card';
                    card.onclick = () => this.selectTemplate(name, card, type);
                    
                    card.innerHTML = `
                        <h3>${name}</h3>
                        <div class="template-weights">
                            ${Object.entries(weights).map(([key, value]) => `
                                <div class="weight-item">
                                    <span>${key}:</span>
                                    <span class="weight-value">${value}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="card-stats">
                            <div class="card-stat">ğŸ‘ ${this.formatNumber(this.templateStats[name].likes)}</div>
                            <div class="card-stat">ğŸ‘ï¸ ${this.formatNumber(this.templateStats[name].views)}</div>
                        </div>
                    `;
                    
                    container.appendChild(card);
                });
            }

            formatNumber(num) {
                if (num >= 1000) {
                    return (num / 1000).toFixed(1) + 'K';
                }
                return num;
            }

            selectTemplate(templateName, cardElement, templateType) {
                // Ø­Ø°Ù active Ø§Ø² Ù‡Ù…Ù‡
                document.querySelectorAll('.template-card').forEach(card => {
                    card.classList.remove('active');
                });
                
                // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† active Ø¨Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
                cardElement.classList.add('active');
                this.selectedTemplate = templateName;
                this.selectedTemplateType = templateType;
                
                // Ø§ÙØ²Ø§ÛŒØ´ Ø¨Ø§Ø²Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù‚Ø§Ù„Ø¨
                this.templateStats[templateName].views += 1;
                
                // Ù†Ù…Ø§ÛŒØ´ ÙØ±Ù… ÙˆØ±ÙˆØ¯
                document.getElementById('inputForm').style.display = 'block';
                
                // Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ ÙØ±Ù…
                setTimeout(() => {
                    document.getElementById('inputForm').scrollIntoView({ behavior: 'smooth' });
                }, 300);
            }

            generateSignal() {
                if (!this.selectedTemplate) {
                    alert('Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ù‚Ø§Ù„Ø¨ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                    return;
                }
                
                // Ù†Ù…Ø§ÛŒØ´ loading
                document.getElementById('loading').style.display = 'block';
                document.getElementById('signalResult').style.display = 'none';
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´
                setTimeout(() => {
                    try {
                        // Ø¯Ø±ÛŒØ§ÙØª Ù…Ù‚Ø§Ø¯ÛŒØ± ÙˆØ±ÙˆØ¯ÛŒ
                        const symbol = document.getElementById('symbol').value || 'BTCUSDT';
                        const currentPrice = parseFloat(document.getElementById('currentPrice').value) || 47500;
                        const resistance = parseFloat(document.getElementById('resistance').value) || 50000;
                        const support = parseFloat(document.getElementById('support').value) || 45000;
                        const rsi = parseFloat(document.getElementById('rsi').value) || 45;
                        const ema20 = parseFloat(document.getElementById('ema20').value) || 47000;
                        const ema50 = parseFloat(document.getElementById('ema50').value) || 46000;
                        const upper = parseFloat(document.getElementById('upper').value) || 52000;
                        const macd = parseFloat(document.getElementById('macd').value) || 150;
                        
                        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³ÛŒÚ¯Ù†Ø§Ù„
                        const weights = this.selectedTemplateType === "100" 
                            ? this.templates100[this.selectedTemplate] 
                            : this.templates500[this.selectedTemplate];
                        
                        let totalSignal = 0;
                        
                        // RSI Signal
                        if (rsi < 30) totalSignal += weights.rsi;
                        else if (rsi > 70) totalSignal -= weights.rsi;
                        
                        // EMA Signal
                        if (ema20 > ema50) totalSignal += (weights.ema20 + weights.ema50) * 0.5;
                        else totalSignal -= (weights.ema20 + weights.ema50) * 0.3;
                        
                        // Ù‚ÛŒÙ…Øª Ù†Ø³Ø¨Øª Ø¨Ù‡ Ù…Ù‚Ø§ÙˆÙ…Øª/Ø­Ù…Ø§ÛŒØª
                        const distanceToResistance = ((resistance - currentPrice) / currentPrice) * 100;
                        const distanceToSupport = ((currentPrice - support) / currentPrice) * 100;
                        
                        if (distanceToSupport < 5) totalSignal += weights.upper * 0.8;
                        if (distanceToResistance < 5) totalSignal -= weights.upper * 0.8;
                        
                        // MACD
                        if (macd > 0) totalSignal += weights.macd * 0.7;
                        else totalSignal -= weights.macd * 0.7;
                        
                        // Ù†Ø±Ù…Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø±Ø§ÛŒ Ù‚Ø§Ù„Ø¨ 0-500
                        if (this.selectedTemplateType === "500") {
                            totalSignal = totalSignal / 5;
                        }
                        
                        // ØªØ¹ÛŒÛŒÙ† Ø¬Ù‡Øª
                        const signalDirection = totalSignal > 0 ? 'BUY' : 'SELL';
                        const signalStrength = Math.min(Math.abs(totalSignal) / 100, 1);
                        
                        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³Ø·ÙˆØ­
                        const entryPrice = currentPrice;
                        const takeProfit = signalDirection === 'BUY' 
                            ? (entryPrice * 1.05).toFixed(2)
                            : (entryPrice * 0.95).toFixed(2);
                        const stopLoss = signalDirection === 'BUY'
                            ? (entryPrice * 0.93).toFixed(2)
                            : (entryPrice * 1.07).toFixed(2);
                        
                        // Ù†Ù…Ø§ÛŒØ´ Ù†ØªÛŒØ¬Ù‡
                        this.displaySignalResult({
                            symbol,
                            signalDirection,
                            signalStrength,
                            entryPrice,
                            takeProfit,
                            stopLoss,
                            currentPrice,
                            rsi
                        });
                        
                        // Ø§Ø¶Ø§ÙÙ‡ Ø¨Ù‡ ØªØ§Ø±ÛŒØ®Ú†Ù‡
                        this.addToHistory({
                            symbol,
                            signalDirection,
                            signalStrength,
                            entryPrice,
                            takeProfit,
                            stopLoss,
                            timestamp: new Date().toLocaleString('fa-IR')
                        });
                        
                    } catch (error) {
                        console.error(error);
                        alert('Ø®Ø·Ø§ Ø¯Ø± ØªÙˆÙ„ÛŒØ¯ Ø³ÛŒÚ¯Ù†Ø§Ù„');
                    }
                    
                    // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† loading
                    document.getElementById('loading').style.display = 'none';
                }, 1500);
            }

            displaySignalResult(data) {
                const signalResult = document.getElementById('signalResult');
                const strengthPercent = Math.round(data.signalStrength * 100);
                
                signalResult.innerHTML = `
                    <h3 style="text-align: center;">Ø³ÛŒÚ¯Ù†Ø§Ù„ ${data.symbol}</h3>
                    <div class="signal-direction ${data.signalDirection === 'BUY' ? 'buy-strong' : 'sell-strong'}">
                        ${data.signalDirection === 'BUY' ? 'ğŸŸ¢ Ø®Ø±ÛŒØ¯ Ù‚ÙˆÛŒ' : 'ğŸ”´ ÙØ±ÙˆØ´ Ù‚ÙˆÛŒ'}
                    </div>
                    <p style="text-align: center; margin: 10px 0;">Ù‚Ø¯Ø±Øª Ø³ÛŒÚ¯Ù†Ø§Ù„: ${strengthPercent}%</p>
                    
                    <div class="signal-grid">
                        <div class="signal-item">
                            <div style="font-size: 0.9rem; color: #ccc;">Ù‚ÛŒÙ…Øª ÙˆØ±ÙˆØ¯</div>
                            <div style="font-weight: bold;">${data.entryPrice}$</div>
                        </div>
                        <div class="signal-item">
                            <div style="font-size: 0.9rem; color: #ccc;">Ø­Ø¯ Ø³ÙˆØ¯</div>
                            <div style="font-weight: bold; color: #00ff88;">${data.takeProfit}$</div>
                        </div>
                        <div class="signal-item">
                            <div style="font-size: 0.9rem; color: #ccc;">Ø­Ø¯ Ø¶Ø±Ø±</div>
                            <div style="font-weight: bold; color: #ff4757;">${data.stopLoss}$</div>
                        </div>
                        <div class="signal-item">
                            <div style="font-size: 0.9rem; color: #ccc;">RSI</div>
                            <div style="font-weight: bold;">${data.rsi}</div>
                        </div>
                    </div>
                `;
                
                signalResult.style.display = 'block';
                signalResult.scrollIntoView({ behavior: 'smooth' });
            }

            addToHistory(signal) {
                this.signalHistory.unshift(signal);
                
                if (this.signalHistory.length > 5) {
                    this.signalHistory.pop();
                }
                
                const historyContainer = document.getElementById('historyContainer');
                historyContainer.innerHTML = '';
                
                this.signalHistory.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    historyItem.innerHTML = `
                        <div style="display: flex; justify-content: space-between;">
                            <strong>${item.symbol}</strong>
                            <span style="font-size: 0.8rem; color: #ccc;">${item.timestamp}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 0.9rem;">
                            <span style="color: ${item.signalDirection === 'BUY' ? '#00ff88' : '#ff4757'}">
                                ${item.signalDirection === 'BUY' ? 'ğŸŸ¢ Ø®Ø±ÛŒØ¯' : 'ğŸ”´ ÙØ±ÙˆØ´'}
                            </span>
                            <span>ÙˆØ±ÙˆØ¯: ${item.entryPrice}$</span>
                            <span>Ø³ÙˆØ¯: ${item.takeProfit}$</span>
                        </div>
                    `;
                    historyContainer.appendChild(historyItem);
                });
            }
        }

        // ØªØ§Ø¨Ø¹ ØªØºÛŒÛŒØ± Ù†ÙˆØ¹ Ù‚Ø§Ù„Ø¨
        function switchTemplateType(type) {
            const btn100 = document.querySelector('.template-type-buttons button:nth-child(1)');
            const btn500 = document.querySelector('.template-type-buttons button:nth-child(2)');
            
            if (type === '100') {
                btn100.classList.add('active');
                btn500.classList.remove('active');
                document.getElementById('templateSection100').style.display = 'block';
                document.getElementById('templateSection500').style.display = 'none';
            } else {
                btn100.classList.remove('active');
                btn500.classList.add('active');
                document.getElementById('templateSection100').style.display = 'none';
                document.getElementById('templateSection500').style.display = 'block';
            }
            
            // Ø±ÛŒØ³Øª Ø§Ù†ØªØ®Ø§Ø¨ Ù‚Ø§Ù„Ø¨
            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.remove('active');
            });
            document.getElementById('inputForm').style.display = 'none';
            window.tradingBot.selectedTemplate = null;
        }

        // ØªØ§Ø¨Ø¹ ØªÙˆÙ„ÛŒØ¯ Ø³ÛŒÚ¯Ù†Ø§Ù„
        function generateSignal() {
            window.tradingBot.generateSignal();
        }

        // ØªØ§Ø¨Ø¹ Ø±ÛŒØ³Øª ÙØ±Ù…
        function resetForm() {
            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.remove('active');
            });
            document.getElementById('inputForm').style.display = 'none';
            document.getElementById('signalResult').style.display = 'none';
            document.getElementById('loading').style.display = 'none';
            
            // Ø±ÛŒØ³Øª ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ÙØ±Ù…
            document.querySelectorAll('.input-form input').forEach(input => {
                input.value = '';
            });
            
            window.tradingBot.selectedTemplate = null;
        }

        // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        let tradingBot;
        window.onload = function() {
            tradingBot = new AdvancedTradingBot();
            window.tradingBot = tradingBot;
            
            // Ø´Ø±ÙˆØ¹ Ù¾Ø®Ø´ Ø®ÙˆØ¯Ú©Ø§Ø± ÙˆÛŒØ¯Ø¦Ùˆ
            const video = document.getElementById('mainVideo');
            video.play().catch(e => {
                console.log("ÙˆÛŒØ¯Ø¦Ùˆ Ø´Ø±ÙˆØ¹ Ù†Ø´Ø¯:", e);
            });
        };
    </script>
</body>
</html>