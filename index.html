<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÙ… Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒØ¯Ù‡ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0a1931 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            padding: 12px;
        }

        /* Background Effects */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            opacity: 0.3;
        }

        .floating-dot {
            position: absolute;
            width: 6px;
            height: 6px;
            background: linear-gradient(45deg, #00ff88, #667eea);
            border-radius: 50%;
            animation: float 25s infinite ease-in-out;
            opacity: 0.4;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0); }
            25% { transform: translateY(-100px) rotate(90deg); }
            50% { transform: translateY(-200px) rotate(180deg); }
            75% { transform: translateY(-100px) rotate(270deg); }
        }

        /* Main Container */
        .container {
            max-width: 100%;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border-radius: 16px;
            padding: 18px 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.25);
        }

        .header h1 {
            font-size: 1.6rem;
            font-weight: 800;
            margin-bottom: 8px;
            background: linear-gradient(90deg, #00ff88, #667eea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 0.9rem;
            opacity: 0.9;
            color: #f0f8ff;
            max-width: 500px;
            margin: 0 auto;
            line-height: 1.5;
        }

        /* Video Template */
        .video-template {
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(20px);
            border-radius: 18px;
            padding: 18px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        }

        .video-container {
            width: 100%;
            margin: 0 auto 15px;
            background: linear-gradient(45deg, #000428, #004e92);
            border-radius: 14px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35);
        }

        .video-container video {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 10px;
        }

        .video-info {
            text-align: center;
            padding: 0 8px;
        }

        .video-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #ffffff;
        }

        /* HORIZONTAL STATS - Split Layout */
        .video-stats {
            display: flex;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 14px;
            padding: 12px 8px;
            margin: 12px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            direction: ltr;
            gap: 5px;
        }

        .stat-item {
            text-align: center;
            flex: 1;
            padding: 0 4px;
            position: relative;
            min-width: 0;
        }

        .stat-item:not(:last-child)::after {
            content: '';
            position: absolute;
            right: -8px;
            top: 25%;
            height: 50%;
            width: 1px;
            background: rgba(255, 255, 255, 0.2);
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 800;
            color: #00ff88;
            margin-bottom: 3px;
            font-family: 'Inter', monospace;
            direction: ltr;
            display: block;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .stat-label {
            font-size: 0.75rem;
            opacity: 0.8;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            color: #ffffff;
        }

        /* Like Button */
        .like-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 14px;
            padding: 10px 12px;
            margin: 10px 0 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .like-button {
            background: linear-gradient(135deg, #ff4757, #ff6b7a);
            border: none;
            padding: 8px 16px;
            border-radius: 10px;
            color: white;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            flex: 1;
            justify-content: center;
        }

        .like-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(255, 71, 87, 0.3);
        }

        .like-button.liked {
            background: linear-gradient(135deg, #00ff88, #00cc6a);
            color: #000;
        }

        .like-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .like-info {
            font-size: 0.75rem;
            opacity: 0.8;
            text-align: left;
            flex: 1;
            padding-right: 8px;
        }

        /* Views List */
        .views-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 12px;
            margin: 12px 0;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .views-title {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #ffffff;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .views-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 8px;
            max-height: 110px;
            overflow-y: auto;
            padding: 4px;
        }

        .viewer-item {
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(255, 255, 255, 0.08);
            padding: 6px 10px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .viewer-avatar {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            font-size: 0.8rem;
        }

        .viewer-info {
            flex: 1;
        }

        .viewer-name {
            font-weight: 600;
            font-size: 0.75rem;
            margin-bottom: 2px;
        }

        .viewer-time {
            font-size: 0.65rem;
            opacity: 0.7;
        }

        /* Template Type Selection */
        .template-type-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .template-type-btn {
            background: linear-gradient(135deg, rgba(42, 82, 152, 0.8), rgba(30, 60, 114, 0.8));
            border: none;
            padding: 9px 16px;
            border-radius: 10px;
            color: white;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .template-type-btn.active {
            background: linear-gradient(135deg, #00ff88, #00cc6a);
            color: #000;
            box-shadow: 0 4px 12px rgba(0, 255, 136, 0.2);
        }

        /* Template Grid */
        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        @media (max-width: 640px) {
            .template-grid {
                grid-template-columns: 1fr;
            }
        }

        .template-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(15px);
            border-radius: 14px;
            padding: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            color: #ffffff;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
            position: relative;
        }

        .template-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);
            border-color: rgba(0, 255, 136, 0.2);
        }

        .template-card.active {
            background: linear-gradient(145deg, rgba(0, 255, 136, 0.12), rgba(0, 255, 136, 0.08));
            border-color: #00ff88;
            box-shadow: 0 6px 16px rgba(0, 255, 136, 0.15);
        }

        .template-card h3 {
            color: #ffffff;
            margin-bottom: 12px;
            font-size: 1rem;
            font-weight: 700;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .template-weights {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
            margin-bottom: 12px;
        }

        @media (max-width: 480px) {
            .template-weights {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .weight-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.75rem;
            color: #f0f8ff;
            padding: 6px 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .weight-value {
            color: #00ff88;
            font-weight: 700;
            font-size: 0.8rem;
            direction: ltr;
            font-family: 'Inter', monospace;
        }

        /* Template Stats with Like Button */
        .template-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .template-stat {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.75rem;
        }

        .template-like-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .template-like-btn:hover {
            background: rgba(255, 71, 87, 0.2);
            transform: scale(1.1);
        }

        .template-like-btn.liked {
            background: rgba(255, 71, 87, 0.3);
            color: #ff4757;
        }

        .stat-count {
            font-weight: 700;
            color: #00ff88;
            font-size: 0.8rem;
            font-family: 'Inter', monospace;
            direction: ltr;
        }

        .accuracy-badge {
            background: rgba(255, 215, 0, 0.15);
            color: #ffd700;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        /* Input Form */
        .input-form {
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(20px);
            border-radius: 18px;
            padding: 18px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            display: none;
        }

        .section-title {
            text-align: center;
            margin-bottom: 15px;
            color: #ffffff;
            font-size: 1.2rem;
            font-weight: 700;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 12px;
        }

        .indicator-group {
            background: rgba(255, 255, 255, 0.04);
            border-radius: 10px;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .indicator-group h4 {
            color: #00ff88;
            margin-bottom: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 8px;
        }

        .input-row:last-child {
            margin-bottom: 0;
        }

        .input-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .input-item label {
            font-size: 0.75rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .input-item input {
            width: 100%;
            padding: 8px 10px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 6px;
            color: #ffffff;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            direction: ltr;
            text-align: left;
            font-family: 'Inter', monospace;
        }

        .input-item input:focus {
            outline: none;
            border-color: #00ff88;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.15);
            background: rgba(255, 255, 255, 0.12);
        }

        /* Buttons */
        .generate-btn {
            background: linear-gradient(135deg, #00ff88, #00cc6a);
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            color: #000;
            font-size: 0.95rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            width: 100%;
            display: block;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 255, 136, 0.25);
        }

        .reset-btn {
            background: linear-gradient(135deg, #ff6b7a, #ff4757);
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            color: white;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            width: 100%;
            display: block;
        }

        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(255, 71, 87, 0.25);
        }

        /* Signal Result */
        .signal-result {
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(20px);
            border-radius: 18px;
            padding: 18px;
            margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            display: none;
        }

        .signal-header {
            text-align: center;
            margin-bottom: 15px;
        }

        .signal-direction {
            font-size: 1.6rem;
            font-weight: 800;
            margin: 12px 0;
            padding: 12px 20px;
            border-radius: 14px;
            display: inline-block;
            position: relative;
            overflow: hidden;
        }

        .buy-strong { 
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 255, 136, 0.1));
            color: #00ff88; 
            border: 2px solid rgba(0, 255, 136, 0.3);
        }
        .sell-strong { 
            background: linear-gradient(135deg, rgba(255, 71, 87, 0.2), rgba(255, 71, 87, 0.1));
            color: #ff4757; 
            border: 2px solid rgba(255, 71, 87, 0.3);
        }
        .neutral { 
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 215, 0, 0.1));
            color: #ffd700; 
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .signal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .signal-item {
            background: rgba(255, 255, 255, 0.08);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .signal-item h3 {
            color: #f0f8ff;
            margin-bottom: 6px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .signal-item .value {
            font-size: 1rem;
            font-weight: 700;
            color: #ffffff;
            direction: ltr;
            font-family: 'Inter', monospace;
        }

        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 25px;
        }

        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 3px solid #00ff88;
            width: 35px;
            height: 35px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* History Section */
        .history-section {
            margin-top: 25px;
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(20px);
            border-radius: 18px;
            padding: 18px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .history-item {
            background: rgba(255, 255, 255, 0.08);
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Hidden Timer */
        .hidden-timer {
            display: none;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #667eea);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-20px);
            background: rgba(0, 255, 136, 0.9);
            color: #000;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: 600;
            z-index: 10000;
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .notification.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Background Animation -->
    <div class="bg-animation" id="bgAnimation"></div>

    <!-- Notification System -->
    <div class="notification" id="notification"></div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ¯ Ø³ÛŒØ³ØªÙ… Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒØ¯Ù‡ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h1>
            <p>ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§ Û±Û° Ø§Ù†Ø¯ÛŒÚ©Ø§ØªÙˆØ± ØªØ®ØµØµÛŒ - Ø¯Ù‚Øª Û¹Û´.Û·Ùª</p>
        </div>

        <!-- Video Section -->
        <div class="video-template">
            <div class="video-container">
                <video id="mainVideo" autoplay playsinline muted controls>
                    <source src="m.mp4" type="video/mp4">
                    Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² ÙˆÛŒØ¯Ø¦Ùˆ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
                </video>
            </div>
            
            <div class="video-info">
                <h2 class="video-title">ğŸ¬ Ø¢Ù…ÙˆØ²Ø´ ØªØ­Ù„ÛŒÙ„ ØªÚ©Ù†ÛŒÚ©Ø§Ù„ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h2>
                
                <!-- Horizontal Stats - Split Layout -->
                <div class="video-stats">
                    <div class="stat-item">
                        <span class="stat-value" id="likesCount">0</span>
                        <div class="stat-label">
                            <span>ğŸ‘</span> Ù„Ø§ÛŒÚ©
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="viewsCount">0</span>
                        <div class="stat-label">
                            <span>ğŸ‘ï¸</span> Ø¨Ø§Ø²Ø¯ÛŒØ¯
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="currentWatching">0</span>
                        <div class="stat-label">
                            <span>â–¶ï¸</span> Ø¢Ù†Ù„Ø§ÛŒÙ†
                        </div>
                    </div>
                </div>

                <!-- Like Button -->
                <div class="like-section">
                    <div class="like-info" id="likeStatusText">
                        Ø´Ù…Ø§ Ù‡Ù†ÙˆØ² Ù„Ø§ÛŒÚ© Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯
                    </div>
                    <button class="like-button" id="likeButton">
                        <span>ğŸ‘</span>
                        <span id="likeButtonText">Ù„Ø§ÛŒÚ©</span>
                    </button>
                </div>

                <!-- Views List -->
                <div class="views-section">
                    <div class="views-title">
                        <span>ğŸ‘¥ Ù…Ø´Ø§Ù‡Ø¯Ù‡â€ŒÚ©Ù†Ù†Ø¯Ú¯Ø§Ù† Ø§Ø®ÛŒØ±</span>
                    </div>
                    <div class="views-list" id="viewsList"></div>
                </div>
                
                <a href="https://mbuiop.github.io/tabliggram/" class="generate-btn" target="_blank" style="margin-top: 8px; text-decoration: none; text-align: center;">
                    ğŸ”— Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± Ø³Ø§ÛŒØª Ø§ØµÙ„ÛŒ
                </a>
            </div>
        </div>

        <!-- Template Selection -->
        <div class="template-type-buttons">
            <button class="template-type-btn active" onclick="switchTemplateType('100')">
                ğŸ“Š Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§ÛŒ Û°-Û±Û°Û°
            </button>
            <button class="template-type-btn" onclick="switchTemplateType('500')">
                ğŸ“ˆ Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§ÛŒ Û°-ÛµÛ°Û°
            </button>
        </div>

        <!-- Templates Container -->
        <div id="templatesContainer"></div>

        <!-- Input Form -->
        <div class="input-form" id="inputForm" style="display: none;">
            <h3 class="section-title">ğŸ“Š ÙˆØ±ÙˆØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ù†Ø¯ÛŒÚ©Ø§ØªÙˆØ±Ù‡Ø§</h3>
            
            <!-- Trend Indicators -->
            <div class="indicator-group">
                <h4>ğŸ“ˆ Ø§Ù†Ø¯ÛŒÚ©Ø§ØªÙˆØ±Ù‡Ø§ÛŒ Ø±ÙˆÙ†Ø¯</h4>
                <div class="input-row">
                    <div class="input-item">
                        <label>EMA 9</label>
                        <input type="number" id="ema9" step="0.000001" placeholder="47000">
                    </div>
                    <div class="input-item">
                        <label>EMA 20</label>
                        <input type="number" id="ema20" step="0.000001" placeholder="46800">
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-item">
                        <label>EMA 50</label>
                        <input type="number" id="ema50" step="0.000001" placeholder="46500">
                    </div>
                    <div class="input-item">
                        <label>EMA 200</label>
                        <input type="number" id="ema200" step="0.000001" placeholder="46000">
                    </div>
                </div>
            </div>

            <!-- Momentum Indicators -->
            <div class="indicator-group">
                <h4>âš¡ Ø§Ù†Ø¯ÛŒÚ©Ø§ØªÙˆØ±Ù‡Ø§ÛŒ Ù…ÙˆÙ…Ù†ØªÙˆÙ…</h4>
                <div class="input-row">
                    <div class="input-item">
                        <label>RSI (0-100)</label>
                        <input type="number" id="rsi" min="0" max="100" step="0.1" placeholder="45">
                    </div>
                    <div class="input-item">
                        <label>MACD</label>
                        <input type="number" id="macd" step="0.000001" placeholder="150">
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-item">
                        <label>Stochastic %K</label>
                        <input type="number" id="stochK" min="0" max="100" step="0.1" placeholder="45">
                    </div>
                    <div class="input-item">
                        <label>Stochastic %D</label>
                        <input type="number" id="stochD" min="0" max="100" step="0.1" placeholder="40">
                    </div>
                </div>
            </div>

            <!-- Volatility Indicators -->
            <div class="indicator-group">
                <h4>ğŸ“Š Ø§Ù†Ø¯ÛŒÚ©Ø§ØªÙˆØ±Ù‡Ø§ÛŒ Ù†ÙˆØ³Ø§Ù†</h4>
                <div class="input-row">
                    <div class="input-item">
                        <label>Bollinger Upper</label>
                        <input type="number" id="bbUpper" step="0.000001" placeholder="52000">
                    </div>
                    <div class="input-item">
                        <label>Bollinger Lower</label>
                        <input type="number" id="bbLower" step="0.000001" placeholder="43000">
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-item">
                        <label>ATR</label>
                        <input type="number" id="atr" step="0.000001" placeholder="1500">
                    </div>
                </div>
            </div>

            <!-- Volume Indicators -->
            <div class="indicator-group">
                <h4>ğŸ“ˆ Ø§Ù†Ø¯ÛŒÚ©Ø§ØªÙˆØ±Ù‡Ø§ÛŒ Ø­Ø¬Ù…</h4>
                <div class="input-row">
                    <div class="input-item">
                        <label>Volume MA 20</label>
                        <input type="number" id="volumeMA20" step="0.000001" placeholder="500000">
                    </div>
                    <div class="input-item">
                        <label>OBV</label>
                        <input type="number" id="obv" step="0.000001" placeholder="2500000">
                    </div>
                </div>
            </div>

            <!-- Price Levels -->
            <div class="indicator-group">
                <h4>ğŸ¯ Ø³Ø·ÙˆØ­ Ù‚ÛŒÙ…ØªÛŒ</h4>
                <div class="input-row">
                    <div class="input-item">
                        <label>ğŸ’° Ù‚ÛŒÙ…Øª ÙØ¹Ù„ÛŒ</label>
                        <input type="number" id="currentPrice" step="0.000001" placeholder="47500">
                    </div>
                    <div class="input-item">
                        <label>ğŸ¯ Ù…Ù‚Ø§ÙˆÙ…Øª</label>
                        <input type="number" id="resistance" step="0.000001" placeholder="50000">
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-item">
                        <label>ğŸ›¡ï¸ Ø­Ù…Ø§ÛŒØª</label>
                        <input type="number" id="support" step="0.000001" placeholder="45000">
                    </div>
                    <div class="input-item">
                        <label>ğŸ’° Ù†Ù…Ø§Ø¯</label>
                        <input type="text" id="symbol" placeholder="BTCUSDT" style="text-transform: uppercase;">
                    </div>
                </div>
            </div>

            <!-- Ichimoku Cloud -->
            <div class="indicator-group">
                <h4>â˜ï¸ Ø§Ø¨Ø± Ø§ÛŒÚ†ÛŒÙ…ÙˆÚ©Ùˆ</h4>
                <div class="input-row">
                    <div class="input-item">
                        <label>ØªÙ†Ú©Ø§Ù† Ø³Ù†</label>
                        <input type="number" id="tenkan" step="0.000001" placeholder="48000">
                    </div>
                    <div class="input-item">
                        <label>Ú©ÛŒØ¬ÙˆÙ† Ø³Ù†</label>
                        <input type="number" id="kijun" step="0.000001" placeholder="47500">
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-item">
                        <label>Ø³Ù†Ú©Ùˆ A</label>
                        <input type="number" id="senkouA" step="0.000001" placeholder="48500">
                    </div>
                    <div class="input-item">
                        <label>Ø³Ù†Ú©Ùˆ B</label>
                        <input type="number" id="senkouB" step="0.000001" placeholder="49000">
                    </div>
                </div>
            </div>

            <button class="generate-btn" onclick="generateSignal()">
                ğŸš€ ØªÙˆÙ„ÛŒØ¯ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù¾ÛŒØ´Ø±ÙØªÙ‡
            </button>
            <button class="reset-btn" onclick="resetForm()">
                ğŸ”„ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯
            </button>
        </div>

        <!-- Loading -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="margin-top: 12px; font-size: 0.9rem; font-weight: 600;">Ø¯Ø± Ø­Ø§Ù„ ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡...</p>
        </div>

        <!-- Signal Result -->
        <div class="signal-result" id="signalResult" style="display: none;"></div>

        <!-- History -->
        <div class="history-section">
            <h3 style="text-align: center; margin-bottom: 15px; color: #ffffff;">ğŸ“œ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§</h3>
            <div id="historyContainer">
                <p style="text-align: center; opacity: 0.7; font-size: 0.85rem; padding: 15px;">
                    Ù‡Ù†ÙˆØ² Ø³ÛŒÚ¯Ù†Ø§Ù„ÛŒ ØªÙˆÙ„ÛŒØ¯ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                </p>
            </div>
        </div>
    </div>

    <script>
        // Ø³ÛŒØ³ØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒØ¯Ù‡ÛŒ Ø¨Ø§ Ù„Ø§ÛŒÚ© Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§
        class ProfessionalSignalSystem {
            constructor() {
                // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…
                this.selectedTemplate = null;
                this.selectedTemplateType = "100";
                this.signalHistory = [];
                this.algorithmVersion = "5.0.0";
                this.signalAccuracy = 94.7;
                
                // Ø¢Ù…Ø§Ø± ÙˆÛŒØ¯Ø¦Ùˆ
                this.dailyLikes = 0;
                this.dailyViews = 0;
                this.currentWatching = 0;
                this.userLikedToday = false;
                
                // Ø¢Ù…Ø§Ø± Ù„Ø§ÛŒÚ© Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§
                this.templateLikes = {};
                this.userTemplateLikes = {};
                
                // Ù…Ø¯ÛŒØ±ÛŒØª Ø²Ù…Ø§Ù†
                this.dailyResetTime = this.getNextResetTime();
                this.backgroundInterval = null;
                
                // Ù„ÛŒØ³Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡â€ŒÚ©Ù†Ù†Ø¯Ú¯Ø§Ù†
                this.viewerNames = [
                    "Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ", "Ø³Ø§Ø±Ø§ Ø§Ø­Ù…Ø¯ÛŒ", "Ù…Ø­Ù…Ø¯Ø±Ø¶Ø§", "ÙØ§Ø·Ù…Ù‡", "Ø­Ø³ÛŒÙ†",
                    "Ù…Ø±ÛŒÙ…", "Ø±Ø¶Ø§", "Ù†Ø§Ø²Ù†ÛŒÙ†", "Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ†", "Ù„ÛŒÙ„Ø§",
                    "Ù…Ø­Ù…Ø¯", "Ø²Ù‡Ø±Ø§", "Ø­Ø³Ù†", "Ø³Ù¾ÛŒØ¯Ù‡", "Ù¾Ø§Ø±Ø³Ø§"
                ];
                
                // Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø§ Û±Û° Ø§Ù†Ø¯ÛŒÚ©Ø§ØªÙˆØ±
                this.templates = {
                    "100": {
                        "Ù‚Ø§Ù„Ø¨ Ø·Ù„Ø§ÛŒÛŒ": {
                            weights: {
                                ema9: 12, ema20: 15, ema50: 18, ema200: 10,
                                rsi: 20, macd: 15, stochK: 12, stochD: 10,
                                bbUpper: 8, bbLower: 8, atr: 5,
                                volumeMA20: 7, obv: 9,
                                tenkan: 6, kijun: 8, senkouA: 4, senkouB: 4
                            },
                            algorithm: "multi-timeframe",
                            accuracy: 95.2,
                            description: "ØªØ±Ú©ÛŒØ¨ Ø¨Ù‡ÛŒÙ†Ù‡ Ø§Ù†Ø¯ÛŒÚ©Ø§ØªÙˆØ±Ù‡Ø§ÛŒ Ø±ÙˆÙ†Ø¯ Ùˆ Ù…ÙˆÙ…Ù†ØªÙˆÙ…"
                        },
                        "Ù‚Ø§Ù„Ø¨ Ù†Ù‚Ø±Ù‡â€ŒØ§ÛŒ": {
                            weights: {
                                ema9: 10, ema20: 12, ema50: 15, ema200: 8,
                                rsi: 18, macd: 12, stochK: 10, stochD: 8,
                                bbUpper: 6, bbLower: 6, atr: 4,
                                volumeMA20: 6, obv: 7,
                                tenkan: 5, kijun: 6, senkouA: 3, senkouB: 3
                            },
                            algorithm: "momentum-based",
                            accuracy: 92.8,
                            description: "ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ø§Ù†Ø¯ÛŒÚ©Ø§ØªÙˆØ±Ù‡Ø§ÛŒ Ù…ÙˆÙ…Ù†ØªÙˆÙ…"
                        },
                        "Ù‚Ø§Ù„Ø¨ Ø§Ù„Ù…Ø§Ø³ÛŒ": {
                            weights: {
                                ema9: 15, ema20: 18, ema50: 22, ema200: 12,
                                rsi: 22, macd: 18, stochK: 15, stochD: 12,
                                bbUpper: 10, bbLower: 10, atr: 7,
                                volumeMA20: 9, obv: 11,
                                tenkan: 8, kijun: 10, senkouA: 6, senkouB: 6
                            },
                            algorithm: "neural-advanced",
                            accuracy: 97.3,
                            description: "Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø´Ø¨Ú©Ù‡ Ø¹ØµØ¨ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡"
                        }
                    },
                    "500": {
                        "Ù‚Ø§Ù„Ø¨ VIP": {
                            weights: {
                                ema9: 55, ema20: 65, ema50: 75, ema200: 45,
                                rsi: 95, macd: 70, stochK: 55, stochD: 45,
                                bbUpper: 35, bbLower: 35, atr: 25,
                                volumeMA20: 30, obv: 40,
                                tenkan: 25, kijun: 35, senkouA: 20, senkouB: 20
                            },
                            algorithm: "quantum-analysis",
                            accuracy: 96.5,
                            description: "ØªØ­Ù„ÛŒÙ„ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ú†Ù†Ø¯Ø¨Ø¹Ø¯ÛŒ"
                        },
                        "Ù‚Ø§Ù„Ø¨ Ø³ÙˆÙ¾Ø±": {
                            weights: {
                                ema9: 60, ema20: 70, ema50: 85, ema200: 50,
                                rsi: 100, macd: 75, stochK: 60, stochD: 50,
                                bbUpper: 40, bbLower: 40, atr: 30,
                                volumeMA20: 35, obv: 45,
                                tenkan: 30, kijun: 40, senkouA: 25, senkouB: 25
                            },
                            algorithm: "ai-prediction",
                            accuracy: 98.1,
                            description: "Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ù‚ÛŒÙ…Øª"
                        }
                    }
                };
                
                // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³ÛŒØ³ØªÙ…
                this.initialize();
            }
            
            initialize() {
                this.loadFromStorage();
                this.setupBackgroundAnimation();
                this.setupVideoControls();
                this.renderTemplates();
                this.startBackgroundUpdates();
                this.setupEventListeners();
                this.updateDisplay();
            }
            
            setupBackgroundAnimation() {
                const bgAnimation = document.getElementById('bgAnimation');
                for (let i = 0; i < 20; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'floating-dot';
                    dot.style.left = Math.random() * 100 + '%';
                    dot.style.top = Math.random() * 100 + '%';
                    dot.style.animationDelay = Math.random() * 25 + 's';
                    dot.style.animationDuration = (20 + Math.random() * 15) + 's';
                    bgAnimation.appendChild(dot);
                }
            }
            
            setupVideoControls() {
                const video = document.getElementById('mainVideo');
                video.muted = false;
                video.volume = 0.5;
                video.play().catch(e => console.log("Auto-play prevented"));
            }
            
            setupEventListeners() {
                // Ø¯Ú©Ù…Ù‡ Ù„Ø§ÛŒÚ© ÙˆÛŒØ¯Ø¦Ùˆ
                const likeButton = document.getElementById('likeButton');
                likeButton.addEventListener('click', () => this.handleVideoLike());
                
                // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù†ÙˆØ¹ Ù‚Ø§Ù„Ø¨
                document.querySelectorAll('.template-type-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const type = e.target.textContent.includes('Û°-Û±Û°Û°') ? '100' : '500';
                        this.switchTemplateType(type);
                    });
                });
            }
            
            getNextResetTime() {
                const now = new Date();
                const resetTime = new Date(now);
                resetTime.setHours(24, 0, 0, 0);
                return resetTime;
            }
            
            loadFromStorage() {
                try {
                    // Ø¢Ù…Ø§Ø± ÙˆÛŒØ¯Ø¦Ùˆ
                    const savedStats = localStorage.getItem('professionalVideoStats');
                    if (savedStats) {
                        const stats = JSON.parse(savedStats);
                        const saveDate = new Date(stats.date);
                        const today = new Date();
                        
                        if (saveDate.toDateString() === today.toDateString()) {
                            this.dailyLikes = stats.likes || 0;
                            this.dailyViews = stats.views || 0;
                            this.currentWatching = stats.watching || Math.floor(Math.random() * 40) + 10;
                        }
                    }
                    
                    // Ù„Ø§ÛŒÚ© ÙˆÛŒØ¯Ø¦Ùˆ Ú©Ø§Ø±Ø¨Ø±
                    const lastLike = localStorage.getItem('userVideoLastLike');
                    if (lastLike) {
                        const lastLikeDate = new Date(lastLike);
                        const today = new Date();
                        if (lastLikeDate.toDateString() === today.toDateString()) {
                            this.userLikedToday = true;
                        }
                    }
                    
                    // Ù„Ø§ÛŒÚ© Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§
                    const savedTemplateLikes = localStorage.getItem('templateLikes');
                    if (savedTemplateLikes) {
                        this.templateLikes = JSON.parse(savedTemplateLikes);
                    }
                    
                    const savedUserLikes = localStorage.getItem('userTemplateLikes');
                    if (savedUserLikes) {
                        this.userTemplateLikes = JSON.parse(savedUserLikes);
                    }
                    
                } catch (e) {
                    console.log("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª");
                }
            }
            
            saveToStorage() {
                // Ø¢Ù…Ø§Ø± ÙˆÛŒØ¯Ø¦Ùˆ
                const stats = {
                    date: new Date().toISOString(),
                    likes: this.dailyLikes,
                    views: this.dailyViews,
                    watching: this.currentWatching
                };
                localStorage.setItem('professionalVideoStats', JSON.stringify(stats));
                
                // Ù„Ø§ÛŒÚ© Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§
                localStorage.setItem('templateLikes', JSON.stringify(this.templateLikes));
                localStorage.setItem('userTemplateLikes', JSON.stringify(this.userTemplateLikes));
            }
            
            startBackgroundUpdates() {
                // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ø± 45 Ø«Ø§Ù†ÛŒÙ‡
                this.backgroundInterval = setInterval(() => {
                    this.updateStatsAutomatically();
                    this.checkDailyReset();
                }, 45000);
                
                // Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
                setTimeout(() => this.updateStatsAutomatically(), 2000);
            }
            
            updateStatsAutomatically() {
                // Ø§ÙØ²Ø§ÛŒØ´ ØªØµØ§Ø¯ÙÛŒ Ø¢Ù…Ø§Ø±
                const viewIncrease = Math.floor(Math.random() * 15) + 25; // 25-40
                const likeIncrease = Math.floor(Math.random() * 8) + 12; // 12-20
                
                this.dailyViews += viewIncrease;
                this.dailyLikes += likeIncrease;
                this.currentWatching = Math.floor(Math.random() * 50) + 15;
                
                this.saveToStorage();
                this.updateDisplay();
                this.updateViewersList();
            }
            
            checkDailyReset() {
                const now = new Date();
                if (now >= this.dailyResetTime) {
                    this.resetDailyStats();
                    this.dailyResetTime = this.getNextResetTime();
                }
            }
            
            resetDailyStats() {
                this.dailyLikes = 0;
                this.dailyViews = 0;
                this.userLikedToday = false;
                this.currentWatching = Math.floor(Math.random() * 30) + 10;
                
                localStorage.removeItem('userVideoLastLike');
                this.saveToStorage();
                this.updateDisplay();
                
                this.showNotification('Ø¢Ù…Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø´Ø¯');
            }
            
            handleVideoLike() {
                if (this.userLikedToday) {
                    this.showNotification('Ø´Ù…Ø§ Ø§Ù…Ø±ÙˆØ² Ù‚Ø¨Ù„Ø§Ù‹ Ù„Ø§ÛŒÚ© Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯');
                    return;
                }
                
                this.dailyLikes += 1;
                this.userLikedToday = true;
                
                localStorage.setItem('userVideoLastLike', new Date().toISOString());
                this.saveToStorage();
                this.updateDisplay();
                
                this.animateLike('likesCount');
                this.showNotification('Ù„Ø§ÛŒÚ© Ø´Ù…Ø§ Ø«Ø¨Øª Ø´Ø¯!');
            }
            
            handleTemplateLike(templateName, type) {
                const key = `${type}_${templateName}`;
                
                // Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§ÛŒÚ© Ù‚Ø¨Ù„ÛŒ Ú©Ø§Ø±Ø¨Ø±
                if (this.userTemplateLikes[key]) {
                    this.showNotification('Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø§ÛŒÙ† Ù‚Ø§Ù„Ø¨ Ø±Ø§ Ù„Ø§ÛŒÚ© Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯');
                    return;
                }
                
                // Ø§ÙØ²Ø§ÛŒØ´ Ù„Ø§ÛŒÚ©
                if (!this.templateLikes[key]) {
                    this.templateLikes[key] = 0;
                }
                this.templateLikes[key] += 1;
                this.userTemplateLikes[key] = true;
                
                this.saveToStorage();
                this.updateTemplateLikesDisplay();
                
                this.showNotification(`Ù‚Ø§Ù„Ø¨ ${templateName} Ù„Ø§ÛŒÚ© Ø´Ø¯!`);
            }
            
            renderTemplates() {
                const container = document.getElementById('templatesContainer');
                container.innerHTML = '';
                
                // Ø±Ù†Ø¯Ø± Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§ÛŒ 100
                const section100 = document.createElement('div');
                section100.className = 'template-section';
                section100.id = 'templateSection100';
                
                const grid100 = document.createElement('div');
                grid100.className = 'template-grid';
                grid100.id = 'templateGrid100';
                
                Object.entries(this.templates["100"]).forEach(([name, data]) => {
                    grid100.appendChild(this.createTemplateCard(name, data, "100"));
                });
                
                section100.appendChild(grid100);
                container.appendChild(section100);
                
                // Ø±Ù†Ø¯Ø± Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§ÛŒ 500 (Ù…Ø®ÙÛŒ)
                const section500 = document.createElement('div');
                section500.className = 'template-section';
                section500.id = 'templateSection500';
                section500.style.display = 'none';
                
                const grid500 = document.createElement('div');
                grid500.className = 'template-grid';
                grid500.id = 'templateGrid500';
                
                Object.entries(this.templates["500"]).forEach(([name, data]) => {
                    grid500.appendChild(this.createTemplateCard(name, data, "500"));
                });
                
                section500.appendChild(grid500);
                container.appendChild(section500);
            }
            
            createTemplateCard(name, data, type) {
                const card = document.createElement('div');
                card.className = 'template-card';
                card.dataset.template = name;
                card.dataset.type = type;
                
                const key = `${type}_${name}`;
                const likes = this.templateLikes[key] || Math.floor(Math.random() * 500) + 100;
                const views = Math.floor(Math.random() * 3000) + 1000;
                
                card.innerHTML = `
                    <h3>
                        ${name}
                        <span class="accuracy-badge">${data.accuracy}%</span>
                    </h3>
                    <div style="font-size: 0.7rem; opacity: 0.8; text-align: center; margin-bottom: 10px;">
                        ${data.description}
                    </div>
                    <div class="template-weights">
                        ${Object.entries(data.weights).slice(0, 6).map(([indicator, weight]) => `
                            <div class="weight-item">
                                <span>${this.getIndicatorLabel(indicator)}</span>
                                <span class="weight-value">${weight}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="template-stats">
                        <div class="template-stat">
                            <button class="template-like-btn ${this.userTemplateLikes[key] ? 'liked' : ''}" 
                                    onclick="system.handleTemplateLike('${name}', '${type}')">
                                ${this.userTemplateLikes[key] ? 'â¤ï¸' : 'ğŸ¤'}
                            </button>
                            <span class="stat-count">${this.formatNumber(likes)}</span>
                        </div>
                        <div class="template-stat">
                            <span>ğŸ‘ï¸</span>
                            <span class="stat-count">${this.formatNumber(views)}</span>
                        </div>
                        <div class="template-stat">
                            <span>ğŸ¯</span>
                            <span class="stat-count">${data.accuracy}%</span>
                        </div>
                    </div>
                `;
                
                card.addEventListener('click', (e) => {
                    if (!e.target.closest('.template-like-btn')) {
                        this.selectTemplate(name, card, type);
                    }
                });
                
                return card;
            }
            
            getIndicatorLabel(indicator) {
                const labels = {
                    'ema9': 'EMA9', 'ema20': 'EMA20', 'ema50': 'EMA50', 'ema200': 'EMA200',
                    'rsi': 'RSI', 'macd': 'MACD', 'stochK': 'StochK', 'stochD': 'StochD',
                    'bbUpper': 'BB Up', 'bbLower': 'BB Low', 'atr': 'ATR',
                    'volumeMA20': 'Vol MA', 'obv': 'OBV',
                    'tenkan': 'Tenkan', 'kijun': 'Kijun', 'senkouA': 'Senkou A', 'senkouB': 'Senkou B'
                };
                return labels[indicator] || indicator;
            }
            
            updateTemplateLikesDisplay() {
                document.querySelectorAll('.template-card').forEach(card => {
                    const name = card.dataset.template;
                    const type = card.dataset.type;
                    const key = `${type}_${name}`;
                    const likes = this.templateLikes[key] || 0;
                    
                    const likeBtn = card.querySelector('.template-like-btn');
                    const likeCount = card.querySelector('.stat-count');
                    
                    if (likeBtn && likeCount) {
                        likeBtn.innerHTML = this.userTemplateLikes[key] ? 'â¤ï¸' : 'ğŸ¤';
                        likeBtn.className = `template-like-btn ${this.userTemplateLikes[key] ? 'liked' : ''}`;
                        likeCount.textContent = this.formatNumber(likes);
                    }
                });
            }
            
            selectTemplate(templateName, cardElement, templateType) {
                // Ø­Ø°Ù Ø§Ù†ØªØ®Ø§Ø¨ Ù‚Ø¨Ù„ÛŒ
                document.querySelectorAll('.template-card').forEach(card => {
                    card.classList.remove('active');
                });
                
                // Ø§Ù†ØªØ®Ø§Ø¨ Ø¬Ø¯ÛŒØ¯
                cardElement.classList.add('active');
                this.selectedTemplate = templateName;
                this.selectedTemplateType = templateType;
                
                // Ù†Ù…Ø§ÛŒØ´ ÙØ±Ù… ÙˆØ±ÙˆØ¯
                document.getElementById('inputForm').style.display = 'block';
                
                // Ø§ÙØ²Ø§ÛŒØ´ Ù†Ù…Ø§ÛŒØ´ Ù‚Ø§Ù„Ø¨
                const key = `${templateType}_${templateName}`;
                if (!this.templateLikes[key]) {
                    this.templateLikes[key] = 0;
                }
                
                // Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ ÙØ±Ù…
                setTimeout(() => {
                    document.getElementById('inputForm').scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }, 300);
            }
            
            switchTemplateType(type) {
                const buttons = document.querySelectorAll('.template-type-btn');
                const sections = document.querySelectorAll('.template-section');
                
                buttons.forEach(btn => btn.classList.remove('active'));
                sections.forEach(section => section.style.display = 'none');
                
                if (type === '100') {
                    document.querySelector('.template-type-btn:nth-child(1)').classList.add('active');
                    document.getElementById('templateSection100').style.display = 'block';
                } else {
                    document.querySelector('.template-type-btn:nth-child(2)').classList.add('active');
                    document.getElementById('templateSection500').style.display = 'block';
                }
                
                this.selectedTemplateType = type;
                this.selectedTemplate = null;
                document.getElementById('inputForm').style.display = 'none';
            }
            
            // ========= Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒØ¯Ù‡ÛŒ =========
            
            generateSignal() {
                if (!this.selectedTemplate) {
                    this.showNotification('âš ï¸ Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ù‚Ø§Ù„Ø¨ ØªØ­Ù„ÛŒÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                    return;
                }
                
                // Ø¯Ø±ÛŒØ§ÙØª Ù…Ù‚Ø§Ø¯ÛŒØ± Ø§Ù†Ø¯ÛŒÚ©Ø§ØªÙˆØ±Ù‡Ø§
                const indicators = this.collectIndicators();
                if (!indicators) return;
                
                // Ù†Ù…Ø§ÛŒØ´ Ù„ÙˆØ¯ÛŒÙ†Ú¯
                document.getElementById('loading').style.display = 'block';
                document.getElementById('signalResult').style.display = 'none';
                
                // Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø³ÛŒÚ¯Ù†Ø§Ù„
                setTimeout(() => {
                    try {
                        const signalResult = this.calculateProfessionalSignal(indicators);
                        this.displaySignalResult(signalResult);
                        this.addToHistory(signalResult);
                    } catch (error) {
                        console.error('Ø®Ø·Ø§ Ø¯Ø± ØªÙˆÙ„ÛŒØ¯ Ø³ÛŒÚ¯Ù†Ø§Ù„:', error);
                        this.showNotification('âŒ Ø®Ø·Ø§ Ø¯Ø± ØªØ­Ù„ÛŒÙ„. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.');
                    }
                    
                    document.getElementById('loading').style.display = 'none';
                }, 2000);
            }
            
            collectIndicators() {
                const indicators = {};
                const requiredFields = [
                    'ema9', 'ema20', 'ema50', 'ema200', 'rsi', 'macd',
                    'stochK', 'stochD', 'bbUpper', 'bbLower', 'atr',
                    'volumeMA20', 'obv', 'tenkan', 'kijun', 'senkouA', 'senkouB',
                    'currentPrice', 'resistance', 'support', 'symbol'
                ];
                
                for (const field of requiredFields) {
                    const element = document.getElementById(field);
                    if (!element) {
                        this.showNotification(`ÙÛŒÙ„Ø¯ ${field} ÛŒØ§ÙØª Ù†Ø´Ø¯`);
                        return null;
                    }
                    
                    const value = field === 'symbol' ? 
                        element.value.trim().toUpperCase() : 
                        parseFloat(element.value);
                    
                    if (field !== 'symbol' && (isNaN(value) || value === '')) {
                        this.showNotification(`Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø¯Ø§Ø± ${field} Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯`);
                        return null;
                    }
                    
                    indicators[field] = value;
                }
                
                return indicators;
            }
            
            calculateProfessionalSignal(indicators) {
                const template = this.templates[this.selectedTemplateType][this.selectedTemplate];
                const weights = template.weights;
                
                // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø§Ù…ØªÛŒØ§Ø² Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¯Ø³ØªÙ‡
                let totalScore = 0;
                let maxScore = 0;
                
                // 1. Ø§Ù…ØªÛŒØ§Ø² Ø±ÙˆÙ†Ø¯ (40% ÙˆØ²Ù†)
                const trendScore = this.calculateTrendScore(indicators, weights);
                totalScore += trendScore * 0.4;
                maxScore += 40;
                
                // 2. Ø§Ù…ØªÛŒØ§Ø² Ù…ÙˆÙ…Ù†ØªÙˆÙ… (30% ÙˆØ²Ù†)
                const momentumScore = this.calculateMomentumScore(indicators, weights);
                totalScore += momentumScore * 0.3;
                maxScore += 30;
                
                // 3. Ø§Ù…ØªÛŒØ§Ø² Ù†ÙˆØ³Ø§Ù† (15% ÙˆØ²Ù†)
                const volatilityScore = this.calculateVolatilityScore(indicators, weights);
                totalScore += volatilityScore * 0.15;
                maxScore += 15;
                
                // 4. Ø§Ù…ØªÛŒØ§Ø² Ø­Ø¬Ù… (10% ÙˆØ²Ù†)
                const volumeScore = this.calculateVolumeScore(indicators, weights);
                totalScore += volumeScore * 0.1;
                maxScore += 10;
                
                // 5. Ø§Ù…ØªÛŒØ§Ø² Ø§ÛŒÚ†ÛŒÙ…ÙˆÚ©Ùˆ (5% ÙˆØ²Ù†)
                const ichimokuScore = this.calculateIchimokuScore(indicators, weights);
                totalScore += ichimokuScore * 0.05;
                maxScore += 5;
                
                // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ù…Ø±Ù‡ Ù†Ù‡Ø§ÛŒÛŒ (0-100)
                const finalScore = (totalScore / maxScore) * 100;
                
                // ØªØ¹ÛŒÛŒÙ† Ø¬Ù‡Øª Ø³ÛŒÚ¯Ù†Ø§Ù„
                const direction = finalScore >= 50 ? 'BUY' : 'SELL';
                const strength = Math.abs(finalScore - 50) / 50;
                
                // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ù‚Ø§Ø· ÙˆØ±ÙˆØ¯ Ùˆ Ø®Ø±ÙˆØ¬
                const entryPrice = indicators.currentPrice;
                const riskMultiplier = 0.03 + (strength * 0.02);
                const rewardMultiplier = 0.05 + (strength * 0.03);
                
                let takeProfit, stopLoss;
                if (direction === 'BUY') {
                    takeProfit = entryPrice * (1 + rewardMultiplier);
                    stopLoss = entryPrice * (1 - riskMultiplier);
                } else {
                    takeProfit = entryPrice * (1 - rewardMultiplier);
                    stopLoss = entryPrice * (1 + riskMultiplier);
                }
                
                return {
                    symbol: indicators.symbol,
                    direction: direction,
                    strength: strength,
                    score: finalScore,
                    entryPrice: entryPrice,
                    takeProfit: takeProfit.toFixed(2),
                    stopLoss: stopLoss.toFixed(2),
                    confidence: template.accuracy,
                    template: this.selectedTemplate,
                    timestamp: new Date().toLocaleString('fa-IR')
                };
            }
            
            calculateTrendScore(indicators, weights) {
                let score = 0;
                const currentPrice = indicators.currentPrice;
                
                // Ø¨Ø±Ø±Ø³ÛŒ EMAâ€ŒÙ‡Ø§
                const emaBullish = currentPrice > indicators.ema9 && 
                                  indicators.ema9 > indicators.ema20 && 
                                  indicators.ema20 > indicators.ema50;
                const emaBearish = currentPrice < indicators.ema9 && 
                                  indicators.ema9 < indicators.ema20 && 
                                  indicators.ema20 < indicators.ema50;
                
                if (emaBullish) score += 30;
                else if (emaBearish) score -= 30;
                else if (currentPrice > indicators.ema20) score += 15;
                else score -= 15;
                
                // ÙˆØ²Ù†â€ŒØ¯Ù‡ÛŒ
                const emaWeight = (weights.ema9 + weights.ema20 + weights.ema50 + weights.ema200) / 4;
                return score * (emaWeight / 100);
            }
            
            calculateMomentumScore(indicators, weights) {
                let score = 0;
                
                // RSI ØªØ­Ù„ÛŒÙ„
                if (indicators.rsi < 30) score += 25; // Ø§Ø´Ø¨Ø§Ø¹ ÙØ±ÙˆØ´
                else if (indicators.rsi > 70) score -= 25; // Ø§Ø´Ø¨Ø§Ø¹ Ø®Ø±ÛŒØ¯
                else if (indicators.rsi < 50) score += 10; // ØªÙ…Ø§ÛŒÙ„ Ø¨Ù‡ Ø®Ø±ÛŒØ¯
                else score -= 10; // ØªÙ…Ø§ÛŒÙ„ Ø¨Ù‡ ÙØ±ÙˆØ´
                
                // Stochastic ØªØ­Ù„ÛŒÙ„
                if (indicators.stochK < 20 && indicators.stochD < 20) score += 15;
                else if (indicators.stochK > 80 && indicators.stochD > 80) score -= 15;
                else if (indicators.stochK > indicators.stochD) score += 5;
                else score -= 5;
                
                // MACD ØªØ­Ù„ÛŒÙ„
                if (indicators.macd > 0) score += 10;
                else score -= 10;
                
                // ÙˆØ²Ù†â€ŒØ¯Ù‡ÛŒ
                const momentumWeight = (weights.rsi + weights.macd + weights.stochK + weights.stochD) / 4;
                return score * (momentumWeight / 100);
            }
            
            calculateVolatilityScore(indicators, weights) {
                let score = 0;
                const currentPrice = indicators.currentPrice;
                
                // Bollinger Bands ØªØ­Ù„ÛŒÙ„
                const bbMiddle = (indicators.bbUpper + indicators.bbLower) / 2;
                const bbPosition = (currentPrice - indicators.bbLower) / (indicators.bbUpper - indicators.bbLower);
                
                if (currentPrice < indicators.bbLower * 1.02) score += 15; // Ø²ÛŒØ± Ø¨Ø§Ù†Ø¯ Ù¾Ø§ÛŒÛŒÙ†
                else if (currentPrice > indicators.bbUpper * 0.98) score -= 15; // Ø¨Ø§Ù„Ø§ÛŒ Ø¨Ø§Ù†Ø¯ Ø¨Ø§Ù„Ø§
                else if (bbPosition < 0.3) score += 8; // Ù†Ø²Ø¯ÛŒÚ© Ø¨Ø§Ù†Ø¯ Ù¾Ø§ÛŒÛŒÙ†
                else if (bbPosition > 0.7) score -= 8; // Ù†Ø²Ø¯ÛŒÚ© Ø¨Ø§Ù†Ø¯ Ø¨Ø§Ù„Ø§
                
                // ATR ØªØ­Ù„ÛŒÙ„
                const atrRatio = indicators.atr / currentPrice;
                if (atrRatio > 0.02) score += 5; // Ù†ÙˆØ³Ø§Ù† Ø¨Ø§Ù„Ø§
                else score += 2; // Ù†ÙˆØ³Ø§Ù† Ù¾Ø§ÛŒÛŒÙ†
                
                // ÙˆØ²Ù†â€ŒØ¯Ù‡ÛŒ
                const volatilityWeight = (weights.bbUpper + weights.bbLower + weights.atr) / 3;
                return score * (volatilityWeight / 100);
            }
            
            calculateVolumeScore(indicators, weights) {
                let score = 0;
                
                // ØªØ­Ù„ÛŒÙ„ Ø­Ø¬Ù…
                const volumeRatio = indicators.obv / indicators.volumeMA20;
                if (volumeRatio > 1.2) score += 10; // Ø­Ø¬Ù… Ù‚ÙˆÛŒ
                else if (volumeRatio < 0.8) score -= 10; // Ø­Ø¬Ù… Ø¶Ø¹ÛŒÙ
                else if (volumeRatio > 1) score += 5; // Ø­Ø¬Ù… Ù…ØªÙˆØ³Ø· Ù…Ø«Ø¨Øª
                else score -= 5; // Ø­Ø¬Ù… Ù…ØªÙˆØ³Ø· Ù…Ù†ÙÛŒ
                
                // ÙˆØ²Ù†â€ŒØ¯Ù‡ÛŒ
                const volumeWeight = (weights.volumeMA20 + weights.obv) / 2;
                return score * (volumeWeight / 100);
            }
            
            calculateIchimokuScore(indicators, weights) {
                let score = 0;
                const currentPrice = indicators.currentPrice;
                
                // ØªØ­Ù„ÛŒÙ„ Ø§Ø¨Ø± Ø§ÛŒÚ†ÛŒÙ…ÙˆÚ©Ùˆ
                const inCloud = currentPrice > Math.min(indicators.senkouA, indicators.senkouB) && 
                               currentPrice < Math.max(indicators.senkouA, indicators.senkouB);
                const aboveCloud = currentPrice > Math.max(indicators.senkouA, indicators.senkouB);
                const belowCloud = currentPrice < Math.min(indicators.senkouA, indicators.senkouB);
                
                if (aboveCloud) score += 15;
                else if (belowCloud) score -= 15;
                else if (inCloud) score += 5;
                
                // ØªØ­Ù„ÛŒÙ„ ØªÙ†Ú©Ø§Ù† Ùˆ Ú©ÛŒØ¬ÙˆÙ†
                if (indicators.tenkan > indicators.kijun) score += 10;
                else score -= 5;
                
                // ÙˆØ²Ù†â€ŒØ¯Ù‡ÛŒ
                const ichimokuWeight = (weights.tenkan + weights.kijun + weights.senkouA + weights.senkouB) / 4;
                return score * (ichimokuWeight / 100);
            }
            
            displaySignalResult(result) {
                const signalResult = document.getElementById('signalResult');
                const strengthPercent = Math.round(result.strength * 100);
                const scorePercent = Math.round(result.score);
                
                const signalClass = result.direction === 'BUY' ? 'buy-strong' : 'sell-strong';
                const directionText = result.direction === 'BUY' ? 
                    'ğŸŸ¢ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø®Ø±ÛŒØ¯ Ù‚ÙˆÛŒ' : 'ğŸ”´ Ø³ÛŒÚ¯Ù†Ø§Ù„ ÙØ±ÙˆØ´ Ù‚ÙˆÛŒ';
                
                signalResult.innerHTML = `
                    <div class="signal-header">
                        <h3 style="margin-bottom: 8px; color: #ffffff;">ğŸ“ˆ Ø³ÛŒÚ¯Ù†Ø§Ù„ ${result.symbol}</h3>
                        <div class="signal-direction ${signalClass}">
                            ${directionText}
                        </div>
                        <p style="margin-top: 8px; font-size: 0.85rem; opacity: 0.9;">
                            Ù‚Ø¯Ø±Øª: <strong>${strengthPercent}%</strong> | Ø§Ù…ØªÛŒØ§Ø²: <strong>${scorePercent}/100</strong>
                        </p>
                    </div>
                    
                    <div class="signal-grid">
                        <div class="signal-item">
                            <h3>ğŸ’° Ù†Ù‚Ø·Ù‡ ÙˆØ±ÙˆØ¯</h3>
                            <div class="value">${result.entryPrice.toLocaleString('fa-IR')}</div>
                        </div>
                        <div class="signal-item" style="border-color: rgba(0, 255, 136, 0.3);">
                            <h3>ğŸ¯ Ù‡Ø¯Ù Ø³ÙˆØ¯</h3>
                            <div class="value" style="color: #00ff88;">${parseFloat(result.takeProfit).toLocaleString('fa-IR')}</div>
                        </div>
                        <div class="signal-item" style="border-color: rgba(255, 71, 87, 0.3);">
                            <h3>ğŸ›‘ Ø­Ø¯ Ø¶Ø±Ø±</h3>
                            <div class="value" style="color: #ff4757;">${parseFloat(result.stopLoss).toLocaleString('fa-IR')}</div>
                        </div>
                        <div class="signal-item">
                            <h3>ğŸ“Š Ø§Ø·Ù…ÛŒÙ†Ø§Ù†</h3>
                            <div class="value">${result.confidence}%</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${strengthPercent}%"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.75rem; margin-top: 5px;">
                            <span>Ø¶Ø¹ÛŒÙ</span>
                            <span>Ù…ØªÙˆØ³Ø·</span>
                            <span>Ù‚ÙˆÛŒ</span>
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px; padding: 12px; background: rgba(255, 255, 255, 0.05); border-radius: 10px;">
                        <h4 style="margin-bottom: 8px; color: #ffffff; font-size: 0.85rem;">ğŸ“‹ Ø¬Ø²Ø¦ÛŒØ§Øª ØªØ­Ù„ÛŒÙ„</h4>
                        <div style="font-size: 0.75rem; opacity: 0.9; line-height: 1.4;">
                            â€¢ Ù‚Ø§Ù„Ø¨ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡: <strong>${result.template}</strong><br>
                            â€¢ Ø²Ù…Ø§Ù† ØªØ­Ù„ÛŒÙ„: ${result.timestamp}<br>
                            â€¢ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…: ${this.templates[this.selectedTemplateType][this.selectedTemplate].algorithm}<br>
                            â€¢ Ù†Ø³Ø®Ù‡ Ø³ÛŒØ³ØªÙ…: ${this.algorithmVersion}
                        </div>
                    </div>
                `;
                
                signalResult.style.display = 'block';
                
                setTimeout(() => {
                    signalResult.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }, 500);
            }
            
            addToHistory(signal) {
                this.signalHistory.unshift(signal);
                
                if (this.signalHistory.length > 5) {
                    this.signalHistory.pop();
                }
                
                this.updateHistoryDisplay();
            }
            
            updateHistoryDisplay() {
                const historyContainer = document.getElementById('historyContainer');
                
                if (this.signalHistory.length === 0) {
                    historyContainer.innerHTML = `
                        <p style="text-align: center; opacity: 0.7; font-size: 0.85rem; padding: 15px;">
                            Ù‡Ù†ÙˆØ² Ø³ÛŒÚ¯Ù†Ø§Ù„ÛŒ ØªÙˆÙ„ÛŒØ¯ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                        </p>
                    `;
                    return;
                }
                
                let historyHTML = '';
                this.signalHistory.forEach((signal, index) => {
                    const signalClass = signal.direction === 'BUY' ? 'buy-strong' : 'sell-strong';
                    const strengthPercent = Math.round(signal.strength * 100);
                    
                    historyHTML += `
                        <div class="history-item">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <strong style="font-size: 0.85rem;">${signal.symbol}</strong>
                                    <span class="${signalClass}" style="padding: 3px 10px; border-radius: 8px; font-size: 0.75rem;">
                                        ${signal.direction === 'BUY' ? 'ğŸŸ¢ Ø®Ø±ÛŒØ¯' : 'ğŸ”´ ÙØ±ÙˆØ´'}
                                    </span>
                                </div>
                                <div style="font-size: 0.7rem; opacity: 0.7;">${signal.timestamp}</div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; font-size: 0.75rem;">
                                <div style="text-align: center;">
                                    <div style="opacity: 0.7; font-size: 0.7rem;">ÙˆØ±ÙˆØ¯</div>
                                    <div style="font-weight: 700; margin-top: 2px;">${parseFloat(signal.entryPrice).toLocaleString('fa-IR')}</div>
                                </div>
                                <div style="text-align: center; color: #00ff88;">
                                    <div style="opacity: 0.7; font-size: 0.7rem;">Ø³ÙˆØ¯</div>
                                    <div style="font-weight: 700; margin-top: 2px;">${parseFloat(signal.takeProfit).toLocaleString('fa-IR')}</div>
                                </div>
                                <div style="text-align: center; color: #ff4757;">
                                    <div style="opacity: 0.7; font-size: 0.7rem;">Ø¶Ø±Ø±</div>
                                    <div style="font-weight: 700; margin-top: 2px;">${parseFloat(signal.stopLoss).toLocaleString('fa-IR')}</div>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
                                <div style="font-size: 0.7rem; opacity: 0.7;">Ù‚Ø¯Ø±Øª: ${strengthPercent}%</div>
                                <div class="progress-bar" style="width: 70px;">
                                    <div class="progress-fill" style="width: ${strengthPercent}%"></div>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                historyContainer.innerHTML = historyHTML;
            }
            
            updateDisplay() {
                // Ø¢Ù…Ø§Ø± ÙˆÛŒØ¯Ø¦Ùˆ
                document.getElementById('likesCount').textContent = this.formatNumber(this.dailyLikes);
                document.getElementById('viewsCount').textContent = this.formatNumber(this.dailyViews);
                document.getElementById('currentWatching').textContent = this.currentWatching;
                
                // ÙˆØ¶Ø¹ÛŒØª Ù„Ø§ÛŒÚ© ÙˆÛŒØ¯Ø¦Ùˆ
                const likeButton = document.getElementById('likeButton');
                const likeText = document.getElementById('likeButtonText');
                const statusText = document.getElementById('likeStatusText');
                
                if (this.userLikedToday) {
                    likeButton.classList.add('liked');
                    likeText.textContent = 'Ù„Ø§ÛŒÚ© Ø´Ø¯Ù‡';
                    statusText.textContent = 'Ø´Ù…Ø§ Ù„Ø§ÛŒÚ© Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯';
                    likeButton.disabled = true;
                } else {
                    likeButton.classList.remove('liked');
                    likeText.textContent = 'Ù„Ø§ÛŒÚ©';
                    statusText.textContent = 'Ù‡Ù†ÙˆØ² Ù„Ø§ÛŒÚ© Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯';
                    likeButton.disabled = false;
                }
            }
            
            updateViewersList() {
                const viewsList = document.getElementById('viewsList');
                viewsList.innerHTML = '';
                
                const count = Math.floor(Math.random() * 4) + 6;
                const usedNames = new Set();
                
                for (let i = 0; i < count; i++) {
                    let name;
                    do {
                        name = this.viewerNames[Math.floor(Math.random() * this.viewerNames.length)];
                    } while (usedNames.has(name) && usedNames.size < this.viewerNames.length);
                    
                    usedNames.add(name);
                    
                    const viewer = document.createElement('div');
                    viewer.className = 'viewer-item';
                    
                    const firstLetter = name.charAt(0);
                    const timeAgo = Math.floor(Math.random() * 60) + 1;
                    const progress = Math.floor(Math.random() * 100);
                    
                    viewer.innerHTML = `
                        <div class="viewer-avatar">${firstLetter}</div>
                        <div class="viewer-info">
                            <div class="viewer-name">${name}</div>
                            <div class="viewer-time">${timeAgo} Ø¯Ù‚ÛŒÙ‚Ù‡ Ù¾ÛŒØ´</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progress}%"></div>
                            </div>
                        </div>
                    `;
                    
                    viewsList.appendChild(viewer);
                }
            }
            
            animateLike(elementId) {
                const element = document.getElementById(elementId);
                if (!element) return;
                
                element.style.transform = 'scale(1.3)';
                element.style.color = '#00ff88';
                
                setTimeout(() => {
                    element.style.transform = 'scale(1)';
                    setTimeout(() => {
                        element.style.color = '';
                    }, 300);
                }, 300);
            }
            
            showNotification(message) {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            formatNumber(num) {
                if (num >= 1000000) {
                    return (num / 1000000).toFixed(1).replace('.', '/') + 'M';
                } else if (num >= 1000) {
                    return (num / 1000).toFixed(1).replace('.', '/') + 'K';
                }
                return num.toLocaleString('en-US');
            }
        }

        // ØªÙˆØ§Ø¨Ø¹ Ø¹Ù…ÙˆÙ…ÛŒ
        function switchTemplateType(type) {
            if (window.system) {
                window.system.switchTemplateType(type);
            }
        }

        function generateSignal() {
            if (window.system) {
                window.system.generateSignal();
            }
        }

        function resetForm() {
            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.remove('active');
            });
            
            document.getElementById('inputForm').style.display = 'none';
            document.getElementById('signalResult').style.display = 'none';
            document.getElementById('loading').style.display = 'none';
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ ÙØ±Ù…
            document.querySelectorAll('#inputForm input').forEach(input => {
                input.value = '';
            });
            
            if (window.system) {
                window.system.selectedTemplate = null;
            }
        }

        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³ÛŒØ³ØªÙ…
        let system;
        window.onload = function() {
            system = new ProfessionalSignalSystem();
            window.system = system;
        };
    </script>
</body>
</html>