<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ù†Ø´ Ø¹Ø¸ÛŒÙ… | Û±Û°Û° ÙØ§ÛŒÙ„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .chat {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: white;
        }

        .messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            max-width: 85%;
            animation: fade 0.2s ease;
        }

        @keyframes fade {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user {
            align-self: flex-end;
        }

        .bot {
            align-self: flex-start;
        }

        .bubble {
            padding: 12px 18px;
            border-radius: 20px;
            line-height: 1.7;
            font-size: 1rem;
            color: black;
            white-space: pre-wrap;
            word-break: break-word;
        }

        .user .bubble {
            background: #e3f2fd;
            border-bottom-left-radius: 6px;
        }

        .bot .bubble {
            background: #f5f5f5;
            border-bottom-right-radius: 6px;
        }

        .time {
            font-size: 0.65rem;
            color: #999;
            margin-top: 4px;
            margin-right: 10px;
        }

        .typing {
            padding: 15px 20px;
            background: white;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .input-wrapper {
            flex: 1;
            background: #f5f5f5;
            border-radius: 30px;
            padding: 0 18px;
            border: 1px solid #ddd;
        }

        .input {
            width: 100%;
            background: transparent;
            border: none;
            padding: 14px 0;
            color: black;
            font-size: 1rem;
            direction: rtl;
        }

        .input:focus {
            outline: none;
        }

        .input::placeholder {
            color: #aaa;
        }

        .send-btn {
            width: 48px;
            height: 48px;
            background: #006d77;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }

        .send-btn:active {
            transform: scale(0.95);
            background: #00838f;
        }

        .send-btn svg {
            width: 22px;
            height: 22px;
            fill: white;
        }

        .stats {
            position: fixed;
            bottom: 80px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.7rem;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="chat">
        <div class="messages" id="messages">
            <div class="message bot">
                <div class="bubble">ğŸ“š Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ù†Ø´ Û±Û°Û° ÙØ§ÛŒÙ„ÛŒ ÙØ¹Ø§Ù„ Ø´Ø¯. Ù‡Ø± Ø³ÙˆØ§Ù„ÛŒ Ø¯Ø§Ø±ÛŒ Ø¨Ù¾Ø±Ø³.</div>
                <div class="time">Ø§Ù„Ø¢Ù†</div>
            </div>
        </div>
        
        <div class="typing">
            <div class="input-wrapper">
                <input type="text" class="input" id="input" placeholder="..." autocomplete="off">
            </div>
            <button class="send-btn" id="sendBtn">
                <svg viewBox="0 0 24 24">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                </svg>
            </button>
        </div>
    </div>

    <div class="stats" id="stats">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>

    <!-- ===== Û±Û°Û° ÙØ§ÛŒÙ„ Ø¯Ø§Ù†Ø´ ===== -->
    <script src="m1.js"></script>
    <script src="m2.js"></script>
    <script src="m3.js"></script>
    <script src="m4.js"></script>
    <script src="m5.js"></script>
    <script src="m6.js"></script>
    <script src="m7.js"></script>
    <script src="m8.js"></script>
    <script src="m9.js"></script>
    <script src="m10.js"></script>
    <script src="m11.js"></script>
    <script src="m12.js"></script>
    <script src="m13.js"></script>
    <script src="m14.js"></script>
    <script src="m15.js"></script>
    <script src="m16.js"></script>
    <script src="m17.js"></script>
    <script src="m18.js"></script>
    <script src="m19.js"></script>
    <script src="m20.js"></script>
    <script src="m21.js"></script>
    <script src="m22.js"></script>
    <script src="m23.js"></script>
    <script src="m24.js"></script>
    <script src="m25.js"></script>
    <script src="m26.js"></script>
    <script src="m27.js"></script>
    <script src="m28.js"></script>
    <script src="m29.js"></script>
    <script src="m30.js"></script>
    <script src="m31.js"></script>
    <script src="m32.js"></script>
    <script src="m33.js"></script>
    <script src="m34.js"></script>
    <script src="m35.js"></script>
    <script src="m36.js"></script>
    <script src="m37.js"></script>
    <script src="m38.js"></script>
    <script src="m39.js"></script>
    <script src="m40.js"></script>
    <script src="m41.js"></script>
    <script src="m42.js"></script>
    <script src="m43.js"></script>
    <script src="m44.js"></script>
    <script src="m45.js"></script>
    <script src="m46.js"></script>
    <script src="m47.js"></script>
    <script src="m48.js"></script>
    <script src="m49.js"></script>
    <script src="m50.js"></script>
    <script src="m51.js"></script>
    <script src="m52.js"></script>
    <script src="m53.js"></script>
    <script src="m54.js"></script>
    <script src="m55.js"></script>
    <script src="m56.js"></script>
    <script src="m57.js"></script>
    <script src="m58.js"></script>
    <script src="m59.js"></script>
    <script src="m60.js"></script>
    <script src="m61.js"></script>
    <script src="m62.js"></script>
    <script src="m63.js"></script>
    <script src="m64.js"></script>
    <script src="m65.js"></script>
    <script src="m66.js"></script>
    <script src="m67.js"></script>
    <script src="m68.js"></script>
    <script src="m69.js"></script>
    <script src="m70.js"></script>
    <script src="m71.js"></script>
    <script src="m72.js"></script>
    <script src="m73.js"></script>
    <script src="m74.js"></script>
    <script src="m75.js"></script>
    <script src="m76.js"></script>
    <script src="m77.js"></script>
    <script src="m78.js"></script>
    <script src="m79.js"></script>
    <script src="m80.js"></script>
    <script src="m81.js"></script>
    <script src="m82.js"></script>
    <script src="m83.js"></script>
    <script src="m84.js"></script>
    <script src="m85.js"></script>
    <script src="m86.js"></script>
    <script src="m87.js"></script>
    <script src="m88.js"></script>
    <script src="m89.js"></script>
    <script src="m90.js"></script>
    <script src="m91.js"></script>
    <script src="m92.js"></script>
    <script src="m93.js"></script>
    <script src="m94.js"></script>
    <script src="m95.js"></script>
    <script src="m96.js"></script>
    <script src="m97.js"></script>
    <script src="m98.js"></script>
    <script src="m99.js"></script>
    <script src="m100.js"></script>

    <script>
        // ==================== Û±. Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‡Ù…Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ ====================
        let knowledgeBase = {};

        function loadAllFiles() {
            const files = [
                m1, m2, m3, m4, m5, m6, m7, m8, m9, m10,
                m11, m12, m13, m14, m15, m16, m17, m18, m19, m20,
                m21, m22, m23, m24, m25, m26, m27, m28, m29, m30,
                m31, m32, m33, m34, m35, m36, m37, m38, m39, m40,
                m41, m42, m43, m44, m45, m46, m47, m48, m49, m50,
                m51, m52, m53, m54, m55, m56, m57, m58, m59, m60,
                m61, m62, m63, m64, m65, m66, m67, m68, m69, m70,
                m71, m72, m73, m74, m75, m76, m77, m78, m79, m80,
                m81, m82, m83, m84, m85, m86, m87, m88, m89, m90,
                m91, m92, m93, m94, m95, m96, m97, m98, m99, m100
            ];
            
            let totalItems = 0;
            files.forEach((file, index) => {
                if (file && typeof file === 'object') {
                    knowledgeBase = {...knowledgeBase, ...file};
                    totalItems += Object.keys(file).length;
                } else {
                    console.log(`ÙØ§ÛŒÙ„ m${index+1}.js Ø®Ø§Ù„ÛŒ Ø§Ø³Øª ÛŒØ§ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯`);
                }
            });
            
            document.getElementById('stats').innerHTML = 
                `ğŸ“Š ${Object.keys(knowledgeBase).length} Ø³ÙˆØ§Ù„ Ø¯Ø± ${files.filter(f => f).length} ÙØ§ÛŒÙ„ ÙØ¹Ø§Ù„`;
            
            console.log('âœ… Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ù†Ø´ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯:', Object.keys(knowledgeBase).length, 'Ù…ÙˆØ±Ø¯');
        }

        // ==================== Û². Ù…ÙˆØªÙˆØ± Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ ====================
        function findBestAnswer(question) {
            question = question.trim().toLowerCase();
            
            // Ø­Ø°Ù Ú©Ù„Ù…Ø§Øª Ø§Ø¶Ø§ÙÛŒ
            let cleanQuestion = question.replace(/[ØŸ?!\s]/g, ' ').trim();
            
            // Û±. Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¯Ù‚ÛŒÙ‚
            if (knowledgeBase[cleanQuestion]) {
                return knowledgeBase[cleanQuestion];
            }
            
            // Û². Ø¬Ø³ØªØ¬ÙˆÛŒåŒ…å«
            for (let key in knowledgeBase) {
                if (cleanQuestion.includes(key)) {
                    return knowledgeBase[key];
                }
            }
            
            // Û³. Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ
            let bestMatch = null;
            let bestScore = 0;
            let questionWords = cleanQuestion.split(' ').filter(w => w.length > 1);
            
            for (let key in knowledgeBase) {
                let score = 0;
                let keyWords = key.split(' ');
                
                for (let qWord of questionWords) {
                    for (let kWord of keyWords) {
                        if (kWord.includes(qWord) || qWord.includes(kWord)) {
                            score += 2;
                        }
                    }
                }
                
                // Ø§Ù…ØªÛŒØ§Ø² Ø¨Ø±Ø§ÛŒ Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ø·ÙˆÙ„Ø§Ù†ÛŒâ€ŒØªØ±
                if (key.length > 5 && cleanQuestion.includes(key.substring(0, 4))) {
                    score += 1;
                }
                
                if (score > bestScore) {
                    bestScore = score;
                    bestMatch = knowledgeBase[key];
                }
            }
            
            if (bestScore > 1) {
                return bestMatch;
            }
            
            return "âŒ Ø§ÛŒÙ† Ø³ÙˆØ§Ù„ Ø±Ùˆ ØªÙˆÛŒ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ù†Ø´ Ù†Ø¯Ø§Ø±Ù…. Ù…ÛŒØ´Ù‡ ÙˆØ§Ø¶Ø­â€ŒØªØ± Ø¨Ù¾Ø±Ø³ÛŒØŸ";
        }

        // ==================== Û³. Ù…Ø¯ÛŒØ±ÛŒØª Ú†Øª ====================
        let messagesDiv = document.getElementById('messages');
        let inputField = document.getElementById('input');
        let sendButton = document.getElementById('sendBtn');

        function addMessage(text, sender) {
            let messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            let bubble = document.createElement('div');
            bubble.className = 'bubble';
            bubble.textContent = text;
            
            let timeDiv = document.createElement('div');
            timeDiv.className = 'time';
            let now = new Date();
            timeDiv.textContent = now.getHours() + ':' + now.getMinutes().toString().padStart(2, '0');
            
            messageDiv.appendChild(bubble);
            messageDiv.appendChild(timeDiv);
            messagesDiv.appendChild(messageDiv);
            
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function sendMessage() {
            let question = inputField.value.trim();
            if (question === '') return;
            
            addMessage(question, 'user');
            inputField.value = '';
            
            setTimeout(() => {
                let answer = findBestAnswer(question);
                addMessage(answer, 'bot');
            }, 400);
        }

        // ==================== Û´. Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ ====================
        sendButton.addEventListener('click', function(e) {
            e.preventDefault();
            sendMessage();
        });

        inputField.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                sendMessage();
            }
        });

        // ==================== Ûµ. Ø´Ø±ÙˆØ¹ ====================
        loadAllFiles();
        inputField.focus();
    </script>
</body>
</html>